<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Cloud Diary</title>
<style>
body {
  font-family: Arial;
  background: #111;
  color: white;
  text-align: center;
  padding: 15px;
}
input, textarea, button {
  width: 95%;
  padding: 12px;
  margin: 6px;
  font-size: 16px;
}
.entry {
  background: #222;
  padding: 10px;
  margin: 10px;
  border-radius: 8px;
}
.hidden { display: none; }
</style>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
</head>

<body>

<h2 id="title">ğŸ” Login</h2>

<div id="loginBox">
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button id="loginBtn">Login</button>
  <p id="msg"></p>
</div>

<div id="diary" class="hidden">
  <h2>ğŸ“” My Diary</h2>

  <textarea id="text" placeholder="Write your thoughts..."></textarea>
  <button id="saveBtn">â• Save</button>

  <div id="entries"></div>
</div>

<script>
// ---------- LOGIN ----------
const USER = "yusufsodiq082@gmail.com";
const PASS = "a336336a";

document.getElementById("loginBtn").onclick = function(){
  const e = email.value;
  const p = password.value;
  if(e === USER && p === PASS){
    loginBox.classList.add("hidden");
    diary.classList.remove("hidden");
    title.innerText = "ğŸ“” My Diary";
    loadEntries();
  } else {
    msg.innerText = "âŒ Incorrect login or password";
  }
};

// ---------- FIREBASE ----------
var firebaseConfig = {
  apiKey: "AIzaSyA8hfYjGN1EgB7K8x77p_ky84ssuWS8EkI",
  authDomain: "my-diary-app-ee165.firebaseapp.com",
  projectId: "my-diary-app-ee165"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();

// ---------- SAVE ----------
saveBtn.onclick = function(){
  const txt = text.value.trim();
  if(!txt) return alert("Write something!");
  db.collection("diary").add({
    text: txt,
    time: new Date().toLocaleString()
  }).then(()=>{
    text.value="";
    loadEntries();
  });
};

// ---------- LOAD ----------
function loadEntries(){
  db.collection("diary").orderBy("time","desc").get().then(snapshot=>{
    entries.innerHTML="";
    snapshot.forEach(doc=>{
      const d = doc.data();
      const div = document.createElement("div");
      div.className="entry";
      div.innerHTML = `<b>${d.time}</b><br>${d.text}`;
      entries.appendChild(div);
    });
  });
}
</script>

</body>
</html>
