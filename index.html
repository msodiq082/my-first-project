<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Private Diary</title>
<style>
body{font-family:Arial; background:#111; color:white; text-align:center; padding:15px;}
input,textarea,button{width:90%;padding:10px;margin:5px;font-size:16px;}
.entry{background:#222;padding:10px;margin:10px;border-radius:8px;}
.hidden{display:none;}
</style>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
</head>
<body>

<h2>ğŸ” Login</h2>
<div id="loginBox">
  <input id="email" placeholder="Email"><br>
  <input id="password" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
  <p id="loginMsg"></p>
</div>

<div id="diary" class="hidden">
  <h2>ğŸ“” My Diary</h2>
  <textarea id="text" placeholder="Write your thoughts..."></textarea><br>
  <button onclick="addEntry()">â• Save</button>
  <button onclick="logout()">ğŸšª Logout</button>
  <div id="entries"></div>
</div>

<script>
// -------- FIREBASE CONFIG ----------
var firebaseConfig = {
  apiKey: "AIzaSyA8hfYjGN1EgB7K8x77p_ky84ssuWS8EkI",
  authDomain: "my-diary-app-ee165.firebaseapp.com",
  projectId: "my-diary-app-ee165",
  storageBucket: "my-diary-app-ee165.appspot.com",
  messagingSenderId: "754565123662",
  appId: "1:754565123662:web:6862a02f691ad2b453bd1f"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();

// -------- LOGIN ----------
const USER="yusufsodiq082@gmail.com";
const PASS="a336336a";

function login(){
  if(email.value===USER && password.value===PASS){
    loginBox.classList.add("hidden");
    diary.classList.remove("hidden");
    loadEntries();
  } else {
    loginMsg.innerText="âŒ Incorrect login or password";
  }
}

function logout(){ location.reload(); }

// -------- ADD ENTRY ----------
function addEntry(){
  const txt = text.value.trim();
  if(!txt) return alert("Write something!");
  db.collection("diary").add({
    text: txt,
    time: new Date().toLocaleString()
  }).then(()=>{
    text.value="";
    loadEntries();
  }).catch(err=>alert("Error: "+err.message));
}

// -------- LOAD ENTRIES ----------
function loadEntries(){
  db.collection("diary").orderBy("time","desc").get().then(snapshot=>{
    entries.innerHTML="";
    snapshot.forEach(docu=>{
      const data = docu.data();
      const div = document.createElement("div");
      div.className="entry";
      div.innerHTML = `
        <b>${data.time}</b><br>${data.text}<br>
        <button onclick="deleteEntry('${docu.id}')">ğŸ—‘ Delete</button>
      `;
      entries.appendChild(div);
    });
  });
}

// -------- DELETE ENTRY ----------
function deleteEntry(id){
  db.collection("diary").doc(id).delete().then(()=>loadEntries());
}
</script>

</body>
</html>
