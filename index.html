<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Private Diary</title>
<style>
body{font-family:Arial; background:#111; color:white; text-align:center; padding:15px;}
input,textarea,button{width:90%;padding:10px;margin:5px;font-size:16px;}
.entry{background:#222;padding:10px;margin:10px;border-radius:8px;}
.hidden{display:none;}
</style>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
</head>
<body>

<h2>ğŸ” Login</h2>
<div id="loginBox">
  <input id="email" placeholder="Email"><br>
  <input id="password" type="password" placeholder="Password"><br>
  <button id="loginBtn">Login</button>
  <p id="loginMsg"></p>
</div>

<div id="diary" class="hidden">
  <h2>ğŸ“” My Diary</h2>
  <textarea id="text" placeholder="Write your thoughts..."></textarea><br>
  <button id="saveBtn">â• Save</button>
  <button id="logoutBtn">ğŸšª Logout</button>
  <div id="entries"></div>
</div>

<script>
// -------- FIREBASE CONFIG ----------
var firebaseConfig = {
  apiKey: "AIzaSyA8hfYjGN1EgB7K8x77p_ky84ssuWS8EkI",
  authDomain: "my-diary-app-ee165.firebaseapp.com",
  projectId: "my-diary-app-ee165",
  storageBucket: "my-diary-app-ee165.appspot.com",
  messagingSenderId: "754565123662",
  appId: "1:754565123662:web:6862a02f691ad2b453bd1f"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();

// -------- LOGIN CHECK ----------
const USER = "yusufsodiq082@gmail.com";
const PASS = "a336336a";

document.getElementById("loginBtn").onclick = function(){
  const e = document.getElementById("email").value;
  const p = document.getElementById("password").value;
  if(e===USER && p===PASS){
    document.getElementById("loginBox").classList.add("hidden");
    document.getElementById("diary").classList.remove("hidden");
    loadEntries();
  } else {
    document.getElementById("loginMsg").innerText = "âŒ Incorrect login or password";
  }
};

document.getElementById("logoutBtn").onclick = function(){
  location.reload();
};

// -------- ADD ENTRY ----------
document.getElementById("saveBtn").onclick = function(){
  const txt = document.getElementById("text").value.trim();
  if(!txt) return alert("Write something!");
  db.collection("diary").add({
    text: txt,
    time: new Date().toLocaleString()
  }).then(()=>{
    document.getElementById("text").value="";
    loadEntries();
  }).catch(err=>alert("Error: "+err.message));
};

// -------- LOAD ENTRIES ----------
function loadEntries(){
  db.collection("diary").orderBy("time","desc").get().then(snapshot=>{
    const entriesDiv = document.getElementById("entries");
    entriesDiv.innerHTML="";
    snapshot.forEach(docu=>{
      const data = docu.data();
      const div = document.createElement("div");
      div.className="entry";
      div.innerHTML = `
        <b>${data.time}</b><br>${data.text}<br>
        <button onclick="deleteEntry('${docu.id}')">ğŸ—‘ Delete</button>
      `;
      entriesDiv.appendChild(div);
    });
  });
}

// -------- DELETE ENTRY ----------
function deleteEntry(id){
  db.collection("diary").doc(id).delete().then(()=>loadEntries());
}
</script>
</body>
</html>
